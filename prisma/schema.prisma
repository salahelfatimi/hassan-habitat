generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Appartement {
  id           Int           @id @default(autoincrement())
  type         String
  surface      String
  pieces       Int
  capacite     String
  prix_total   Decimal      @db.Decimal(10, 2)
  disponible   Boolean       @default(true)
  etage        Int
  equipements  Equipement[]  @relation("AppartementEquipements")
  reservations Reservation[]
  images       Image[]
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
}

model Image {
  id            Int          @id @default(autoincrement())
  url           String
  appartement   Appartement?  @relation(fields: [appartementId], references: [id])
  appartementId Int?
  createdAt     DateTime     @default(now())
}

model Equipement {
  id           Int           @id @default(autoincrement())
  nom          String
  appartements Appartement[] @relation("AppartementEquipements")
  createdAt    DateTime      @default(now())
}

model Utilisateur {
  id            Int           @id @default(autoincrement())
  nom           String
  email         String        @unique
  mot_de_passe  String
  telephone     String
  adresse       String
  isAdmin       Boolean       @default(false)
  reservations  Reservation[]
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
}

model Reservation {
  id            Int          @id @default(autoincrement())
  date_debut    DateTime
  date_fin      DateTime
  status        String       @default("pending")
  prix_total    Decimal      @db.Decimal(10, 2)
  utilisateur   Utilisateur  @relation(fields: [utilisateurId], references: [id])
  utilisateurId Int
  appartement   Appartement  @relation(fields: [appartementId], references: [id])
  appartementId Int
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
}